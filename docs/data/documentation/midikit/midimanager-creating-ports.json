{"seeAlsoSections":[{"title":"Manager","identifiers":["doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager","doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager-Creating-Connections","doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager-Removing-Ports-and-Connections","doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager-Receiving-Notifications","doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIKitIO-Combine-and-SwiftUI-Features"],"generated":true}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"anchor":"iOS-App-Target-Entitlements","level":3,"type":"heading","text":"iOS App Target Entitlements"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If the application targets iOS or Mac Catalyst, ensure the following entitlements are added to the build target."}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To allow the creation of virtual ports on iOS, add the "},{"type":"strong","inlineContent":[{"type":"text","text":"Background Modes"}]},{"type":"text","text":" entitlement and enable the "},{"type":"strong","inlineContent":[{"type":"text","text":"Audio, AirPlay and Picture in Picture"}]},{"type":"text","text":" mode."}]}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"background-modes-audio.png"}]},{"anchor":"Virtual-Inputs","level":3,"type":"heading","text":"Virtual Inputs"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A virtual input port is created and owned by the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager"},{"type":"text","text":" and will be disposed from the system either when you call "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/remove(_:_:)"},{"type":"text","text":" on the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager"},{"type":"text","text":" or when the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager"},{"type":"text","text":" de-inits."}]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"MIDI events are received on a background thread managed by Core MIDI. If your code in the receive handler closure may result in UI updates, ensure that you dispatch it on the main thread, as demonstrated below."}]}],"type":"aside","name":"Note"},{"style":"tip","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"By forwarding received events to a handler method ("},{"type":"codeVoice","code":"func received(midiEvent:)"},{"type":"text","text":" in this example), you can reuse the same handler method if you plan to use multiple ports or connections that you need to funnel to the same receive block. However for simple event handling, it could be handled entirely within the "},{"type":"codeVoice","code":"receiver:"},{"type":"text","text":" parameter closure."}]}],"type":"aside","name":"Tip"},{"type":"codeListing","syntax":"swift","code":["let inputTag = \"Virtual_MIDI_In\"","","try midiManager.addInput(","    name: \"MyApp MIDI In\",","    tag: inputTag,","    uniqueID: .userDefaultsManaged(key: inputTag),","    receiver: .events { [weak self] events in","        \/\/ Note: this handler will be called on a background thread","        \/\/ so call the next line on main if it may result in UI updates","        DispatchQueue.main.async {","            events.forEach { self?.received(midiEvent: $0) }","        }","    }",")","","private func received(midiEvent: MIDIEvent) {","    switch midiEvent {","    case .noteOn(let payload):","        print(\"Note On:\", payload.note, payload.velocity, payload.channel)","    case .noteOff(let payload):","        print(\"Note Off:\", payload.note, payload.velocity, payload.channel)","    case .cc(let payload):","        print(\"CC:\", payload.controller, payload.value, payload.channel)","    case .programChange(let payload):","        print(\"Program Change:\", payload.program, payload.channel)","        ","    \/\/ etc...","","    default:","        break","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For the "},{"type":"codeVoice","code":"uniqueID:"},{"type":"text","text":" parameter It is best to use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIIdentifierPersistence\/userDefaultsManaged(key:suite:)"},{"type":"text","text":" which automatically manages the endpoint’s Core MIDI identity and restores it each time the same virtual endpoint is created, which other applications rely on to uniquely identify your endpoint so that they can reconnect to it in future."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For simple and powerful event filtering API, see "},{"type":"reference","isActive":true,"identifier":"https:\/\/orchetect.github.io\/MIDIKit\/documentation\/midikit\/midikitcore-event-filters"},{"type":"text","text":"."}]},{"anchor":"Virtual-Outputs","level":2,"type":"heading","text":"Virtual Outputs"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A virtual output port is created and owned by the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager"},{"type":"text","text":" and will be disposed from the system either when you call "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/remove(_:_:)"},{"type":"text","text":" or when the manager de-inits. No special clean-up is necessary."}]},{"type":"codeListing","syntax":"swift","code":["let outputTag = \"Virtual_MIDI_Out\"","","try midiManager.addOutput(","    name: \"MyApp MIDI Out\",","    tag: outputTag,","    uniqueID: .userDefaultsManaged(key: outputTag)",")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For the "},{"type":"codeVoice","code":"uniqueID:"},{"type":"text","text":" parameter it is best to use "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIIdentifierPersistence\/userDefaultsManaged(key:suite:)"},{"type":"text","text":" which automatically manages the endpoint’s Core MIDI identity and restores it each time the same virtual endpoint is created, which other applications rely on to uniquely identify your endpoint so that they can reconnect to it in future."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To send events, call the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManagedSendsMessages\/send(event:)"},{"type":"text","text":" method on the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/managedOutputs"},{"type":"text","text":" dictionary in the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager"},{"type":"text","text":" instance."}]},{"type":"codeListing","syntax":"swift","code":["let output = midiManager.managedOutputs[outputTag]","try output?.send(event: .noteOn(60, velocity: .midi1(127), channel: 0x2))","try output?.send(event: .cc(11, value: .midi1(64), channel: 0x2))"]}]}],"variants":[{"paths":["\/documentation\/midikit\/midimanager-creating-ports"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager-Creating-Ports","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Virtual MIDI ports (endpoints) can be created in order to allow the user to send your app MIDI events or receive events that your app sends. These will appear in the system to other software as MIDI ports, similar to physical MIDI ports."}],"kind":"article","metadata":{"modules":[{"name":"MIDIKit"}],"role":"collectionGroup","title":"Creating Ports"},"hierarchy":{"paths":[["doc:\/\/MIDIKit\/documentation\/MIDIKit","doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIKitIO"]]},"topicSections":[{"title":"MIDIManager Methods","identifiers":["doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/addInput(name:tag:uniqueID:receiver:)","doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/addOutput(name:tag:uniqueID:)"]}],"references":{"background-modes-audio.png":{"alt":"Background Modes","type":"image","identifier":"background-modes-audio.png","variants":[{"url":"\/images\/background-modes-audio.png","traits":["1x","light"]}]},"doc://MIDIKit/documentation/MIDIKit/MIDIManagedSendsMessages/send(event:)":{"role":"symbol","title":"send(event:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"send"},{"kind":"text","text":"("},{"kind":"externalParam","text":"event"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"MIDIEvent","preciseIdentifier":"s:11MIDIKitCore9MIDIEventO"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Send a MIDI Event."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManagedSendsMessages\/send(event:)","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/midikit\/midimanagedsendsmessages\/send(event:)"},"doc://MIDIKit/documentation/MIDIKit/MIDIManager-Removing-Ports-and-Connections":{"role":"collectionGroup","title":"Removing Ports and Connections","abstract":[],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager-Removing-Ports-and-Connections","kind":"article","type":"topic","url":"\/documentation\/midikit\/midimanager-removing-ports-and-connections"},"doc://MIDIKit/documentation/MIDIKit/MIDIKitIO-Combine-and-SwiftUI-Features":{"role":"article","title":"Combine and SwiftUI Features","abstract":[{"type":"text","text":"Certain objects and properties are observable."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIKitIO-Combine-and-SwiftUI-Features","kind":"article","type":"topic","url":"\/documentation\/midikit\/midikitio-combine-and-swiftui-features"},"doc://MIDIKit/documentation/MIDIKit/MIDIIdentifierPersistence/userDefaultsManaged(key:suite:)":{"role":"symbol","title":"MIDIIdentifierPersistence.userDefaultsManaged(key:suite:)","fragments":[{"kind":"keyword","text":"case"},{"kind":"text","text":" "},{"kind":"identifier","text":"userDefaultsManaged"},{"kind":"text","text":"("},{"kind":"externalParam","text":"key"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"suite"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UserDefaults","preciseIdentifier":"c:objc(cs)NSUserDefaults"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Managed with UserDefaults backing (recommended)."},{"type":"text","text":" "},{"type":"text","text":"The MIDI endpoint’s unique ID is managed automatically and persistently stored in"},{"type":"text","text":" "},{"type":"codeVoice","code":"UserDefaults"},{"type":"text","text":". The "},{"type":"codeVoice","code":"standard"},{"type":"text","text":" suite is used by default unless specified."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIIdentifierPersistence\/userDefaultsManaged(key:suite:)","kind":"symbol","type":"topic","url":"\/documentation\/midikit\/midiidentifierpersistence\/userdefaultsmanaged(key:suite:)"},"doc://MIDIKit/documentation/MIDIKit/MIDIManager-Creating-Connections":{"role":"collectionGroup","title":"Creating Connections","abstract":[{"type":"text","text":"Managed connections are smart MIDI connections owned and maintained by the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager"},{"type":"text","text":". They form connections to one or more endpoints and automatically reconnect if the target endpoints disappear and reappear in the system."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager-Creating-Connections","kind":"article","type":"topic","url":"\/documentation\/midikit\/midimanager-creating-connections"},"doc://MIDIKit/documentation/MIDIKit/MIDIManager/addOutput(name:tag:uniqueID:)":{"role":"symbol","title":"addOutput(name:tag:uniqueID:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"addOutput"},{"kind":"text","text":"("},{"kind":"externalParam","text":"name"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"tag"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"uniqueID"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"MIDIIdentifierPersistence","preciseIdentifier":"s:9MIDIKitIO25MIDIIdentifierPersistenceO"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Adds new a managed virtual output to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/managedOutputs"},{"type":"text","text":" dictionary of the"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager"},{"type":"text","text":"."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/addOutput(name:tag:uniqueID:)","kind":"symbol","type":"topic","url":"\/documentation\/midikit\/midimanager\/addoutput(name:tag:uniqueid:)"},"doc://MIDIKit/documentation/MIDIKit/MIDIManager/managedInputs":{"role":"symbol","title":"managedInputs","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"managedInputs"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"MIDIInput","preciseIdentifier":"s:9MIDIKitIO9MIDIInputC"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Dictionary of virtual MIDI inputs managed by this instance."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/managedInputs","kind":"symbol","type":"topic","url":"\/documentation\/midikit\/midimanager\/managedinputs"},"doc://MIDIKit/documentation/MIDIKit/MIDIManager/remove(_:_:)":{"role":"symbol","title":"remove(_:_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"remove"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"MIDIManager","preciseIdentifier":"c:@M@MIDIKitIO@objc(cs)MIDIManager"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"ManagedType","preciseIdentifier":"s:9MIDIKitIO11MIDIManagerC11ManagedTypeO"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"MIDIManager","preciseIdentifier":"c:@M@MIDIKitIO@objc(cs)MIDIManager"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"TagSelection","preciseIdentifier":"s:9MIDIKitIO11MIDIManagerC12TagSelectionO"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Remove a managed MIDI endpoint or connection."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/remove(_:_:)","kind":"symbol","type":"topic","url":"\/documentation\/midikit\/midimanager\/remove(_:_:)"},"https://orchetect.github.io/MIDIKit/documentation/midikit/midikitcore-event-filters":{"title":"Event Filters","titleInlineContent":[{"type":"text","text":"Event Filters"}],"type":"link","identifier":"https:\/\/orchetect.github.io\/MIDIKit\/documentation\/midikit\/midikitcore-event-filters","url":"https:\/\/orchetect.github.io\/MIDIKit\/documentation\/midikit\/midikitcore-event-filters"},"doc://MIDIKit/documentation/MIDIKit/MIDIKitIO":{"role":"collectionGroup","title":"MIDIKitIO","abstract":[{"type":"text","text":"Core MIDI I\/O wrapper layer offering "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager"},{"type":"text","text":" class to create virtual ports and connect to existing ports in the system in order to send and receive MIDI events."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIKitIO","kind":"article","type":"topic","url":"\/documentation\/midikit\/midikitio"},"doc://MIDIKit/documentation/MIDIKit/MIDIManager-Receiving-Notifications":{"role":"collectionGroup","title":"Receiving Notifications","abstract":[{"type":"text","text":"Specify a handler to receive Core MIDI system notifications."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager-Receiving-Notifications","kind":"article","type":"topic","url":"\/documentation\/midikit\/midimanager-receiving-notifications"},"doc://MIDIKit/documentation/MIDIKit":{"role":"collection","title":"MIDIKit","abstract":[{"type":"text","text":"MIDIKit umbrella import that includes all MIDIKit modules."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit","kind":"symbol","type":"topic","url":"\/documentation\/midikit"},"doc://MIDIKit/documentation/MIDIKit/MIDIManager/managedOutputs":{"role":"symbol","title":"managedOutputs","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"managedOutputs"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","text":"MIDIOutput","preciseIdentifier":"s:9MIDIKitIO10MIDIOutputC"},{"kind":"text","text":"]"}],"abstract":[{"type":"text","text":"Dictionary of virtual MIDI outputs managed by this instance."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/managedOutputs","kind":"symbol","type":"topic","url":"\/documentation\/midikit\/midimanager\/managedoutputs"},"doc://MIDIKit/documentation/MIDIKit/MIDIManager":{"role":"symbol","title":"MIDIManager","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"MIDIManager"}],"abstract":[{"type":"text","text":"Central MIDI Port and Connection Manager and MIDI system data provider."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MIDIManager"}],"url":"\/documentation\/midikit\/midimanager"},"doc://MIDIKit/documentation/MIDIKit/MIDIManager/addInput(name:tag:uniqueID:receiver:)":{"role":"symbol","title":"addInput(name:tag:uniqueID:receiver:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"addInput"},{"kind":"text","text":"("},{"kind":"externalParam","text":"name"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"tag"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"uniqueID"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"MIDIIdentifierPersistence","preciseIdentifier":"s:9MIDIKitIO25MIDIIdentifierPersistenceO"},{"kind":"text","text":", "},{"kind":"externalParam","text":"receiver"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"MIDIReceiver","preciseIdentifier":"s:9MIDIKitIO12MIDIReceiverO"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Adds a new managed virtual input to the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/managedInputs"},{"type":"text","text":" dictionary of the"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager"},{"type":"text","text":" and creates the MIDI port in the system."}],"identifier":"doc:\/\/MIDIKit\/documentation\/MIDIKit\/MIDIManager\/addInput(name:tag:uniqueID:receiver:)","kind":"symbol","type":"topic","url":"\/documentation\/midikit\/midimanager\/addinput(name:tag:uniqueid:receiver:)"}}}